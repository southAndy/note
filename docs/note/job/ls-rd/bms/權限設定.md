#bms 

### 前言

常見的權限像是：這個帳號能訪問哪些頁面？ > 在使用這個頁面的哪些功能（API）



## API 權限設定
![[Pasted image 20230522172411.png]]
bms 專案是使用 google sheet 進行管理，以下解釋上圖表單內名詞：
1. alias: 權限名稱（命名架構由：專案名稱.API方法.頁面.要執行的功能)

```shell
//範例
bms.post.report.download
```
3. type: 這個資源的類型（可能有 api 以外的資源）
4. route: 發出的請求路徑名稱
5. des: 針對這個功能的中文介紹
6. update_at: 這份設定最後更新日期

<br>

### 執行流程

在 Sso 元件生成（ mounted） 時，會呼叫 ssoPageLoadHandler() ：
1. 判斷是否已登入
2. 取得 SSO-token （驗證登入用）的程式碼，並存入全域
3. **取得此次登入者資訊**（包含權限清單）
4. 設定帳號清單
5. 重新導向頁面

此帳號的權限資料（跟後端討論的結果）
![[Pasted image 20230607164937.png]]
經過 `storePermissionList` 整理成前端使用的權限邏輯如下：
![[Pasted image 20230522175100.png]]

### API 權限檢測方式

在切換不同頁面的 `router` 時會使用 `router.beforeEach()`執行檢測
```js
router.beforEach((to,from)=>{
	//關閉報錯視窗
	//定義白名單(可使用此服務)
	const whiteListName = ['Login','Sso','NotFound','ProductReceive']
	//定義管理者等級的路由名稱
	const adminRoute = ['CommissionAdmin']
	
})
```


---

## 訪問頁面權限

目前設計有種類型的側邊欄：
1. 巢狀選單（Section 元件 data 內的 router，新增 children 架構即可）
2. 一般選單


當使用者送出帳密後，後端回傳的那包資料內
```js

```

當點擊側邊欄的任一選單時，


---
## 會員登入權限

我的感覺是，覺得這一切都還不錯
### 使用者分級

