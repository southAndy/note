# 前端模組化筆記


### 在沒有模組的時代

試想，今天你接手到一個不支援模組語法（`require`,`import`)的舊專案，你會怎麼追加後續前端功能？若是透過 script 來撰寫前端功能邏輯，程式碼架構會如下：

```html
<html>
    <head>....</head>
    <body></body>
    <script src="/js/a.js"></script>
    <script src="/js/b.js"></script>
    <script src="/js/c.js"></script> 
    <script src="/js/login.js"></script>
    <script src="/js/shoppingCart.js"></script>
    <script src="/js/f.js"></script>
    ....
</html>
```
每個 script 代表網站內的一項功能（例如：login.js, shoppingCart.js)，可以預想 script 數量隨著專案規模同步擴大，這樣會產生什麼隱憂？

1. 請求過多
2. 網站維護難處
3. 變數全域污染造成功能受損

#### 網站維護難處

根據瀏覽器的渲染機制，你會知道瀏覽器會 “**由上而下**” 依序讀取 script，所以 script 正確的排序非常重要，假設你今天專案有在 shoppingCart 內使用 lodash 的套件功能

```html
<html>
    <head>....</head>
    <body></body>
    <script src="/js/a.js"></script>
    <script src="/js/b.js"></script>
    <script src="/js/c.js"></script> 
    <script src="/js/shoppingCart.js"></script>
    <script src="/node_module/lodash.js"></script>
    <script src="/js/f.js"></script>
    ....
</html>
```
若要功能順利運行，要先載入 lodash 再來是 shoppingCart，否則會有功能故障，隨著專案擴大、引入套件功能繁瑣，你會越來越難保各個 script 之間是否有耦合問題。

#### 變數全域污染造成功能受損

通常，不支援 `require`, `import` 語法的專案，是基於舊版 javascript ( ES5 甚至更早)，所以宣告變數只能使用 `var`， var 宣告的變數會直接被掛載到 window 物件上。所以當你在 shoppingCart.js 內宣告了一個 item 變數

```js
//shoppingCart.js

var item = [{},{}]
```
即便你在 f.js 沒有宣告此變數，仍可讀取

```js
//f.js

console.log(item) //[{},{}]
```

:::tip
這個問題除了透過模組化解決外，也可以透過 babel 等第三方套件處理。
:::

### 模組化怎麼解決了這些問題



### 模組化有哪些

